<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" type="text/css" href="./style/result_style.css">
	<link rel="stylesheet" type="text/css" href="./style/header.css">
	<link rel="shortcat icon" type="image/png" href="./img/icon.png">
	<title>Результаты</title>
</head>
<body>

	<div id="header">
		<a href="./" id="header_name">IDEA team</a>

		<a href="./IT" class="header_text">IDEA IT</a>
		<a href="./result" class="header_text">Игры и Результаты</a>

		<img src="./img/icon.png" id="header_img">
	</div>

	<br>
	<br>
	<br>
	<br>
	<br>

	<h1 id="name_page">Игры и их Результаты</h1>
	<table id="table_s">
		<tr>
			<th class="table_head_text">Название</th>
			<th class="table_head_text">Игроки</th>
			<th class="table_head_text">Взято вопросов</th>
			<th class="table_head_text">Результаты(место)</th>
		</tr>
		<tr>
			<td class="table_main_text">Лига Европы</td>
			<td class="table_main_text">
				Сванбаев Марат <br>
				Заглиев Мухаммед <br>
				Абдуллаев Ясар <br>
				Куанышбек Бахытжан <br>
				Далер Ахмедов <br>
				Тулешева Рита </td>
			<td class="table_main_text">36/12</td>
			<td class="table_main_text"></td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup</td>
			<td class="table_main_text">Сванбаев Марат <br>
				Сачев Андрей<br>
				Далер Ахмедов <br>
				Абжаппарова Дарина <br> 
				Скакова Дара <br>
				Ли Герман </td>
			<td class="table_main_text">36/16</td>
			<td class="table_main_text"></td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup middle</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Сачев Андрей <br>
				Далер Ахметов <br>
				Амина Нусупова</td>
			<td class="table_main_text">20/6</td>
			<td class="table_main_text">15</td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup Junior</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Сачев Андрей <br>
				Далер Ахметов <br>
				Амина Нусупова</td>
			<td class="table_main_text">20/15</td>
			<td class="table_main_text">2</td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup Grand</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Сачев Андрей <br>
				Далер Ахметов <br>
				Скакова Дара <br>
				Амина Нусупова</td>
			<td class="table_main_text">20/9</td>
			<td class="table_main_text">2</td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup Grand</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Балгынбаев Танирберген <br>
				Скакова Дара <br>
				Ли Герман </td>
			<td class="table_main_text">20/15</td>
			<td class="table_main_text">1</td>
		</tr>
		<tr>
			<td class="table_main_text">TamosCup Grand</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Сачев Андрей <br>
				Скакова Дара <br>
				Ли Герман </td>
			<td class="table_main_text">36/21</td>
			<td class="table_main_text">2</td>
		</tr>
		<tr>
			<td class="table_main_text">Кубок Ярослава Мутного</td>
			<td class="table_main_text">Марат Сванбаев<br>
				Сачев Андрей <br>
				Скакова Дара <br>
				Ли Герман <br>
				Далер Ахметов <br>
				Сандыкбаев Алмас </td>
			<td class="table_main_text">36/6</td>
			<td class="table_main_text">1</td>
		</tr>
	</table>
</body>
<script>
	const xhr = new XMLHttpRequest();

	xhr.open("GET", "http://idea-team.herokuapp.com/games_statistic.json");
	xhr.open("GET", "/games_statistic.json", true);   
    xhr.setRequestHeader("Content-Type", "application/json");

	xhr.onload = () => {
	    if (xhr.status == 200) {
	        var json_statistic = JSON.parse(xhr.responseText);
	        var table = document.getElementById("table_s");

	        for(let i = 0 ; i < json_statistic.all_games; i++){
				var new_box = document.createElement("tr");
				var box_title = document.createElement("td");
				var box_gamers = document.createElement("td");
				var box_score = document.createElement("td");
				var box_place = document.createElement("td");

				var name_game = document.createTextNode(json_statistic.games_data[i].title);
				//var gamers = document.createTextNode(json_statistic.games_data[i].gamers);
				var score = document.createTextNode(`${json_statistic.games_data[i].all_quest}/${json_statistic.games_data[i].true_quest}`);
				var place = document.createTextNode(json_statistic.games_data[i].place);
		
				box_title.appendChild(name_game);
				box_gamers.innerHTML = json_statistic.games_data[i].gamers;
				box_score.appendChild(score);
				box_place.appendChild(place);

				box_title.setAttribute("class","table_main_text");
				box_gamers.setAttribute("class","table_main_text");
				box_score.setAttribute("class","table_main_text");
				box_place.setAttribute("class","table_main_text");

				new_box.appendChild(box_title);
				new_box.appendChild(box_gamers);
				new_box.appendChild(box_score);
				new_box.appendChild(box_place);

				table.appendChild(new_box);
			}
	    } else {
	        console.error("Server response: ", xhr.statusText);
	    }
	};

	xhr.send(); 
</script>
</html>